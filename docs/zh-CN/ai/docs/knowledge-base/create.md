# 创建知识库

本文说明创建与配置知识库的步骤及主要选项。

## 定义知识库与检索方式

路径：**我的知识库** → **创建新知识库**。

在此步骤需填写：

- **名称**、**描述**：用于区分与说明该知识库。
- **检索设置**：决定在收到用户查询后，系统如何在文档中查找相关内容并提取片段供 LLM 使用。

当前支持三种检索策略，见下表及下文说明。

| 策略     | 说明概要 |
|----------|----------|
| 向量检索 | 将问题向量化，与知识库文本向量比较，取最相似的若干分段。 |
| 全文检索 | 对文档建全文索引，按用户输入词汇匹配并返回包含该词的片段。 |
| 混合检索 | 同时进行全文检索与向量检索，再按规则合并、重排结果。 |

### 向量检索

**含义**：将用户问题转为查询向量，与知识库中文本向量做相似度比较，取最相近的分段。

**可配置项**：

| 项          | 说明 |
|-------------|------|
| Rerank 模型 | 默认关闭。开启后对向量检索结果做重排序，可提升 LLM 所用片段的准确度。 |
| TopK        | 返回与问题最相似的文本分段数量。系统会结合所选模型的上下文窗口动态调节。默认 3，数值越大返回片段越多。 |
| Score 阈值  | 相似度最低分数，仅高于该值的分段会被召回。默认关闭；阈值越高，召回越少。 |

### 全文检索

**含义**：为文档建立全文索引，支持按任意词查询，返回包含这些词的文本片段。

**可配置项**：

| 项          | 说明 |
|-------------|------|
| Rerank 模型 | 默认关闭。开启后对全文检索结果做重排序，提升片段质量。 |
| TopK        | 返回的文本分段数量。系统会结合模型上下文动态调整。默认 3。 |
| Score 阈值  | 仅召回分数高于该值的分段。默认关闭；阈值越高，召回越少。 |

### 混合检索

**含义**：同时执行全文检索与向量检索，并对两种结果进行合并与重排，得到最终召回片段。

**可配置项**：

| 项          | 说明 |
|-------------|------|
| 权重设置    | 可调节「语义（向量）」与「关键词（全文）」的权重。语义权重为 1 表示仅用向量检索，利于跨词义、跨语言匹配；关键词权重为 1 表示仅用全文检索，适合已知确切术语、且需控制计算量的场景。也可自定义两者比例以适配业务。 |
| Rerank 模型 | 默认关闭。开启后对混合检索结果做重排序。 |
| TopK        | 最终返回的文本分段数量。默认 3。 |
| Score 阈值  | 仅召回高于该分数的分段。默认关闭。 |

完成名称、描述与检索设置后，可选择「创建空白知识库」直接完成创建，或点击「创建」进入下一步上传文件。

## 上传文件

- **数量与大小**：单次最多上传 5 个文件，单个文件不超过 10 MB。
- **支持格式**：DOCX、PPTX、HTML、PDF、MD、CSV、XLSX、VTT、JPG、PNG、TXT。
- **来源**：当前仅支持从本地上传，不支持从网页或其他渠道导入。

## 文本与分段设置

该步骤对内容做预处理与分段，得到后续检索所使用的「分段」。分段质量直接影响召回效果与回答准确性。

- **预计分块长度**：除 TXT 外，其余格式均可设置每个分段的大致字数，系统将尽量按该长度切分。
- **TXT 额外设置**：
  - **分段标识符**：遇到该字符（串）时进行分段。默认 `\n\n`，即按段落分块。
  - **分段重叠长度**：相邻分段之间的重叠字数。适当重叠有助于保持语义连贯、提升召回效果，建议设为分段长度对应 Token 数的 10%～25%。

## 完成创建

确认上传与分段设置后，等待系统完成数据处理即可。处理完成后，该知识库即可在应用中被引用与检索。
