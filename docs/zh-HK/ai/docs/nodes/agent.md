# Agent 節點

## 是什麼

Agent 節點是一个**具备自主决策能力的智能執行節點**。
它不仅能调用大模型生成内容，还可以根据当前任務目标，**自动选择是否使用工具、如何使用工具，以及是否需要多步推理**。

如果说：

* 大模型節點 =「一次性思考」
* 工具節點 =「執行具体动作」

那麼：

> **Agent 節點 = 会规划、会判斷、会行动的智能体**

## 您可以用它做什麼

#### 1. 執行複雜、多步骤任務

Agent 節點适合处理**无法用单一步骤完成的任務**，例如：

* 先分析问题
* 再决定是否调用工具
* 根据工具结果继续思考
* 最终产出结果

整个过程由 Agent 自动完成。

---

#### 2. 自动决定是否调用工具

你不需要显式写“如果调用工具 A，就怎么做”。

Agent 会：

* 理解当前任務目标
* 判斷是否需要工具支援
* 自动选择合适的工具
* 使用工具返回结果继续執行

---

#### 3. 在不确定场景下自主决策

Agent 特别适合：

* 用户输入不稳定
* 任務路径不固定
* 结果依赖中间判斷

它可以在執行过程中动态调整策略，而不是严格按预设路径執行。

## Agent 的工作方式（理解即可）

Agent 節點在运行时会：

1. 理解你设定的目标和规则
2. 基于当前上下文进行思考
3. 决定下一步行动（继续思考 / 调用工具 / 輸出结果）
4. 重复上述过程，直到任務完成

你只需要关注**目标和边界**，不需要控制每一步。

## 你需要配置什么

#### 1. 任務目标（最重要）

清晰告诉 Agent：

* 它要完成什么事情
* 成功的标准是什麼

例如：

> “帮助用户找到最合适的解决方案，并给出清晰解释。”

---

#### 2. 可用工具

你需要指定：

* Agent 可以使用哪些工具
* 每个工具能做什么

Agent **只能使用你授权的工具**，不会超出范围。

---

#### 3. 行为约束（可选但强烈建议）

你可以限制 Agent：

* 是否必须返回结构化结果
* 是否可以多次调用工具
* 是否需要在失败时给出说明

这些约束可以显著提升稳定性。

## 輸出结果

* Agent 節點会輸出：

  * 最终執行结果
  * 或整理后的回答内容
* 輸出可以直接连接：

  * Answer 節點（ChatFlow）
  * End 節點（Workflow）

## 使用規則

* Agent 節點通常作為流程中的**核心執行節點**
* 一个流程中可以存在多个 Agent 節點，但不建议过多
* Agent 節點可以替代：

  * 多个大模型節點
  * 多个条件 + 工具組合

## 使用建議（非常重要）

* **任務越複雜，目标越要写清楚**
* 不要让 Agent 同时承担过多职责
* 关键业务流程中，建议：

  * 限制工具数量
  * 限制最大執行步数
* 对可预测任務，优先使用普通節點，Agent 留给“複雜问题”

## 典型場景

* 智能助手（需要推理 + 工具）
* 自动问题解决流程
* 多步信息查询与整理
* 不确定路径的複雜业务处理

## 什么时候不该用 Agent？

* 任務非常簡單、确定
* 流程路径固定
* 对執行结果稳定性要求极高

这类场景更适合：

* 大模型節點 + 工具節點
* 条件判斷節點的显式控制流程

## Agent 節點小结

> **Agent 節點不是“更强的大模型節點”，
> 而是“更自由、但也更需要约束的智能執行单元”。**

---
下面是一份 **面向使用者的对比说明**，专门解决一个核心问题：
**什么时候该用 Agent 節點，什么时候只用 LLM 節點**

语气是**使用指南 + 决策参考**，不是 PRD，可直接放在文档中。


## 什么时候选用 Agent 節點，什么时候选用 LLM 節點？

Agent 節點和 LLM 節點都依赖大模型能力，但它们适合的场景**完全不同**。
选择合适的節點，可以显著提升流程的稳定性、可控性和執行效率。

## 一句话区别

* **LLM 節點**：
  *"我已经知道要模型做什么，只需要它生成或分析一次结果。"*

* **Agent 節點**：
  *"我只知道目标，但不知道中间要走哪几步，需要它自己决定。"*

## 能力对比一览

| 对比维度      | LLM 節點 | Agent 節點 |
| --------- | ------ | -------- |
| 執行方式      | 单次调用   | 多步自主執行   |
| 是否会自主决策   | 不会   | 会      |
| 是否可自动调用工具 | 不能   | 可以     |
| 是否规划執行路径  | 否    | 是      |
| 執行过程是否可预测 | 高    | 相对较低  |
| 配置複雜度     | 低      | 高        |
| 适合流程类型    | 确定型流程  | 不确定型流程   |

## 什么时候选择 LLM 節點？

当你的任務满足以下特征时，**优先选择 LLM 節點**：

#### 适合场景

* 任務步骤清晰、路径固定
* 只需要模型執行一次推理或生成
* 不需要模型决定是否调用工具
* 对輸出稳定性要求较高

#### 常见用途

* 问答回覆生成
* 文本总结、改写
* 分类、提取信息
* 生成固定格式的内容

#### 示例

> “根据用户输入，总结三条要点并返回。”

这种场景不需要自主规划，LLM 節點即可胜任。

## 什么时候选择 Agent 節點？

当你的任務具有以下特征时，**应选择 Agent 節點**：

#### 适合场景

* 任務步骤不固定
* 是否调用工具需要临时判斷
* 需要多轮思考和尝试
* 執行路径依赖中间结果

#### 常见用途

* 複雜问题解决
* 智能助手
* 多步信息查询与整合
* 需要“边想边做”的任務

#### 示例

> “根据用户问题，判斷是否需要查询数据，必要时调用工具，再给出最终结论。”

这种情况下，提前写死流程反而困难，Agent 更合适。

## 选择建议（非常重要）

#### 推荐优先级

1. **能用 LLM 節點解决的，不要用 Agent**
2. **只有在流程不可预知时，才引入 Agent**

原因是：

* LLM 更稳定
* Agent 更灵活，但也更不可控

## 常见误区

**误区一：Agent 比 LLM 更强，应该多用**
→ 实际上 Agent 是"更自由"，不是"更簡單"。

**误区二：複雜流程一定要 Agent**
→ 很多複雜流程用多个 LLM + 条件 + 工具反而更可控。

**误区三：Agent 可以替代所有節點**
→ Agent 更适合"决策型任務"，而不是"规则型任務"。

## 实用速查（直接记这个）

* **要稳定、要可控、要确定结果** → 用 **LLM 節點**
* **要灵活、要自主判斷、要多步執行** → 用 **Agent 節點**

---

