# 流程控制

## 流程的基本结构

在 Agent Builder 中，一个可运行的流程需要满足以下基本结构：

* 流程必须 **从開始節點（Start）開始**
* 流程必须 **以终止節點结束**

  * ChatFlow 使用 **Answer 節點**
  * Workflow 使用 **End 節點**
* 从開始節點到终止節點之间，節點需要形成一条**完整、可執行的路径**


## 節點连接规则

### 1. 節點连接方向

* 節點需要按照執行顺序进行连接
* 執行方向从 **開始節點 → 中间節點 → 终止節點**
* 節點之间透過连线明確執行顺序

## 2. 禁止邏輯循环

* 流程中 **不允许出现邏輯上的循环路径**
* 任意節點不能透過连线回到自身或上游節點
* 流程執行路径必须是**单向、可终止的**

这可以避免流程在运行时陷入无限執行。

## 3. 允许存在孤立節點

* 畫布中可以存在**未连接的節點**
* 孤立節點不会参与流程執行
* 可用于：

  * 方案设计与草稿
  * 临时保留的節點邏輯
  * 后续扩展的流程片段


## 節點连接方式

### 透過節點加号进行连接

節點之间的连接透過節點上的 **加号（＋）** 完成：

1. **长按** 当前節點上的加号
2. **拖动** 到下一个節點的加号位置
3. **松开鼠标**，完成節點之间的连接

连接成功后，两个節點之间会显示執行连线。


## 流程可运行条件

当流程满足以下条件时，才可以运行：

* 从開始節點出发，存在至少一条路径可以到达终止節點
* 執行路径中不存在邏輯循环
* 所选终止節點与流程类型匹配（Answer 或 End）


## 使用建議

* 在搭建流程时，先规划主執行路径，再补充分支
* 使用孤立節點作為流程草稿区，避免影响当前可运行流程
* 连接完成后，建议整体查看流程，确保執行方向清晰

---
